// Family-Tree v.5

Table Profile {           // Профиль пользователя
  id int                 // Идентификатор профиля пользователя

  user int [ref: - User.id]  // Ссылка на пользователя (внешний ключ)

  mother int [ref: < User.id]  // Ссылка на мать (внешний ключ)
  father int [ref: < User.id]  // Ссылка на отца (внешний ключ)

  gender choice         // Пол (выбор между мужским и женским)
  patronymic char       // Отчество
  birthdate date        // Дата рождения
  age int [note: 'auto: today - birthdate']  // Возраст (автоматический расчет)

  birthplace char       // Место рождения
  city char             // Город
  country char          // Страна

  marriage bool         // Семейное положение (женат/замужем)
  partner int [ref: - User.id]  // Ссылка на партнера/партнершу (внешний ключ)

  about_me text         // Информация о пользователе
  education char        // Образование
  work char             // Место работы
  images img            // Изображения пользователя
  alive bool            // Жив ли пользователь
  updated_at datetime   // Дата последнего обновления профиля
}

Table User {    // Пользователь (CustomUser на основе AbstractUser)
  id int            // Идентификатор пользователя

  first_name char   // Имя
  last_name char    // Фамилия

  email email       // Email
  phone phonenumber   // Телефонный номер
  avatar img        // Аватар пользователя
}

Table Family {     // Семья
  id int             // Идентификатор семьи

  family_name char [note: 'auto']  // Название семьи (автоматический расчет)
  description text   // Описание семьи
  images img         // Изображения семьи

  parents int [ref: <> User.id]   // Родители (внешний ключ)
  children int [ref: <> User.id]  // Дети (внешний ключ)
  tree int [ref: - FamilyTree.id]  // Дерево семьи (внешний ключ)

  created_at datetime   // Дата создания записи
  updated_at datetime   // Дата последнего обновления записи
}

Table FamilyTree {    // Семейное древо (автоматическое создание при создании семьи)
  id int             // Идентификатор семейного дерева

  description text   // Описание семейного древа
  images img         // Изображения семейного древа
  address char       // Адрес

  created_at datetime   // Дата создания записи
  updated_at datetime   // Дата последнего обновления записи
}

Table Branch {   // Ветвь семейного древа
  id int             // Идентификатор ветви

  user int [ref: - User.id]   // Ссылка на пользователя (внешний ключ)
  role choice         // Роль пользователя в ветви

  created_at datetime   // Дата создания записи
}

Table PlantedTree {    // Посаженное дерево
  id int             // Идентификатор посаженного дерева

  branch int [ref: - Branch.id]   // Ссылка на ветвь (внешний ключ)
  images img         // Изображения посаженного дерева

  created_at datetime   // Дата создания записи
}

Table FamilyGarden {   // Семейный сад
  id int             // Идентификатор семейного сада

  family_name char   // Название семьи
  description text   // Описание семейного сада
  trees int [ref: <> FamilyTree.id]  // Деревья (внешний ключ)

  updated_at datetime   // Дата последнего обновления записи
}

Table Post {    // Пост
  id int             // Идентификатор поста

  title char         // Заголовок поста
  body text          // Текст поста
  user id [ref: > User.id]   // Ссылка на пользователя (внешний ключ)
  preview img        // Превью поста

  created_at datetime   // Дата создания записи
  updated_at datetime   // Дата последнего обновления записи
}

Table PostImage {    // Изображение поста
  id int             // Идентификатор изображения поста

  title char         // Заголовок изображения
  image img          // Изображение
  post id [ref: > Post.id]   // Ссылка на пост (внешний ключ)
}

Table Like {    // Лайк
  id int             // Идентификатор лайка

  user id [ref: > User.id]   // Ссылка на пользователя (внешний ключ)
  post id [ref: > User.id]   // Ссылка на пост (внешний ключ)
}

Table Comment {    // Комментарий
  id int             // Идентификатор комментария

  user id [ref: > User.id]   // Ссылка на пользователя (внешний ключ)
  post id [ref: > User.id]   // Ссылка на пост (внешний ключ)

  body text          // Текст комментария
  created_at datetime   // Дата создания записи
}

Table Chat {    // Чат
  id int             // Идентификатор чата
}
