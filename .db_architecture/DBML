// Family-Tree v.3

// Таблица "Профиль" содержит информацию о каждом пользователе в системе.
Table Profile {
  id int                                      // Уникальный идентификатор профиля
  mother_id int [ref: < User.id]              // Ссылка на профиль матери
  father_id int [ref: < User.id]              // Ссылка на профиль отца
  first_name char                             // Имя
  last_name char                              // Фамилия
  patronymic char                             // Отчество
  birthdate date                              // Дата рождения
  gender choice                               // Пол
  age int                                     // Возраст
  birthplace char                             // Место рождения
  city char                                   // Город проживания
  country char                                // Страна проживания
  marriage bool                               // Семейное положение (в браке или нет)
  partner_id int [ref: - User.id]             // Ссылка на профиль супруга/супруги
  about_me richtext                           // Информация о себе
  education char                              // Образование
  work char                                   // Место работы
  images image                                // Фотографии
  alive bool                                  // Жив или нет
  updated_at datetime                         // Дата последнего обновления
}

// Таблица "Пользователь" содержит основную информацию о пользователе.
Table User {
  id int                                      // Уникальный идентификатор пользователя
  username char                               // Имя пользователя
  email email                                 // Электронная почта
  phone phonenumber                           // Номер телефона
  avatar img                                  // Аватар пользователя
  profile_id int [ref: - Profile.id]          // Ссылка на профиль пользователя
}

// Таблица "Семья" содержит информацию о семейных отношениях и связях между пользователями.
Table Family {
  id int                                      // Уникальный идентификатор семьи
  description richtext                        // Описание семьи
  images img                                  // Изображения семьи
  parents_id int [ref: <> User.id]            // Ссылки на профили родителей
  children_id int [ref: <> User.id]           // Ссылки на профили детей
  tree_id int [ref: - FamilyTree.id]          // Ссылка на дерево семьи
  created_at datetime                         // Дата создания
  updated_at datetime                         // Дата последнего обновления
}

// Таблица "Семейное дерево" содержит информацию о семейных деревьях и их ветвях.
Table FamilyTree {
  id int                                      // Уникальный идентификатор семейного дерева
  description richtext                        // Описание дерева
  images img                                  // Изображения дерева
  address char                                // Адрес дерева
  branches_id int [ref: <> Branch.id]         // Ссылки на ветви дерева
  created_at datetime                         // Дата создания
  updated_at datetime                         // Дата последнего обновления
}

// Таблица "Ветвь" содержит информацию о каждой ветви в семейном дереве.
Table Branch {
  id int                                      // Уникальный идентификатор ветви
  user_id int [ref: - User.id]                // Ссылка на профиль пользователя
  role choice                                 // Роль в ветви
  created_at datetime                         // Дата создания
}

// Таблица "Посаженное дерево" содержит информацию о каждом дереве, посаженном в семейном дереве.
Table PlantedTree {
  id int                                      // Уникальный идентификатор посаженного дерева
  branch_id int [ref: - Branch.id]            // Ссылка на ветвь дерева
  images img                                  // Изображения посаженного дерева
  created_at datetime                         // Дата создания
}

// Таблица "Семейный сад" содержит информацию о всех семейных деревьях.
Table FamilyGarden {
  id int                                      // Уникальный идентификатор семейного сада
  trees_id int [ref: <> FamilyTree.id]        // Ссылки на семейные деревья
  updated_at datetime                         // Дата последнего обновления
}
